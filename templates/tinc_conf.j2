## Managed by Ansible
## Designed by ALinuxNinja
{% for conf, conf_val in item.config.local.iteritems() -%}
{{conf}} = {{conf_val}}
{% endfor -%}

{% if (item.type == "mesh") -%}
{%- for server in item.node if server.name != inventory_hostname -%}
ConnectTo = {{ server.name }}
{% endfor -%}
{% elif (item.master is defined and (item.master | selectattr('name','equalto',inventory_hostname)| list | count > 0)) -%}
{%- for server in item.node -%}
ConnectTo = {{ server.name }}
{% endfor -%}
{% for server in item.master if server.name != inventory_hostname -%}
ConnectTo = {{ server.name }}
{% endfor -%}
{%- elif (item.node | selectattr('name','equalto',inventory_hostname) | list | count > 0) -%}
{% for server in item.master if server.name != inventory_hostname -%}
ConnectTo = {{ server.name }}
{% endfor -%}
{%- endif -%}
